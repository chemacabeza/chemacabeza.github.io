<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Chapter 7: Working with Numbers - Floating-point numbers | The Engineering Corner</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Chapter 7: Working with Numbers - Floating-point numbers" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Chapter 7: Working with Numbers - Floating-point numbers" />
<meta property="og:description" content="Chapter 7: Working with Numbers - Floating-point numbers" />
<link rel="canonical" href="http://localhost:4000/bash-in-depth/0007-Working-with-Numbers-Floating.html" />
<meta property="og:url" content="http://localhost:4000/bash-in-depth/0007-Working-with-Numbers-Floating.html" />
<meta property="og:site_name" content="The Engineering Corner" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-09-22T15:39:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Chapter 7: Working with Numbers - Floating-point numbers" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-09-22T15:39:00+02:00","datePublished":"2024-09-22T15:39:00+02:00","description":"Chapter 7: Working with Numbers - Floating-point numbers","headline":"Chapter 7: Working with Numbers - Floating-point numbers","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/bash-in-depth/0007-Working-with-Numbers-Floating.html"},"url":"http://localhost:4000/bash-in-depth/0007-Working-with-Numbers-Floating.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="The Engineering Corner" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">The Engineering Corner</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger">
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
            </svg>
          </span>
        </label>

        <div class="trigger">
						<a class="page-link" href="/about/">About</a>
            <a class="page-link" href="/bash-in-depth/">Bash In Depth</a>
				</div>
      </nav></div>
</header>

<!--header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" href="/">The Engineering Corner</a>
    <nav class="site-nav">
      <label for="nav-trigger">
        <svg aria-hidden="true" class="icon-menu">
          <use xlink:href="#icon-menu"></use>
        </svg>
      </label>
      <div class="trigger">
          
          <a href="/bash-in-depth/">Bash In Depth</a>
      </div>
    </nav>
  </div>
</header-->

<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="chapter-content">
  <h1 id="chapter-7-working-with-numbers---floating-point-numbers">Chapter 7: Working with Numbers - Floating-point numbers</h1>

<p>In Bash, working with floating-point numbers can be a bit tricky because Bash’s built-in arithmetic only supports <strong>integer operations</strong>. This means that directly performing calculations involving decimals or fractions is not possible using the default arithmetic capabilities of Bash (<code class="language-plaintext highlighter-rouge">$((...))</code> or <code class="language-plaintext highlighter-rouge">let</code>), which are limited to whole numbers.</p>

<p>To handle floating-point numbers, you need to use external tools like <code class="language-plaintext highlighter-rouge">bc</code> (an arbitrary precision calculator) or <code class="language-plaintext highlighter-rouge">printf</code> (a format string utility). These tools extend Bash’s capability to handle real numbers and precision-based arithmetic.</p>

<p>In the next sections we will learn about the commands <code class="language-plaintext highlighter-rouge">bc</code> and <code class="language-plaintext highlighter-rouge">printf</code>.</p>

<h2 id="printf-command"><code class="language-plaintext highlighter-rouge">printf</code> command</h2>
<p>An unconventional way, although practical, to work with floating point numbers with native bash is by using together with Scientific Notation.</p>

<p>What is the “<em>Scientific Notation</em>”? It’s a way to express numbers which has the following format.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    &lt;base&gt;e&lt;exponent&gt;
</code></pre></div></div>

<p>which would be equivalent to <code class="language-plaintext highlighter-rouge">&lt;base&gt; * 10^{&lt;exponent&gt;}</code><a id="footnote-1-ref" href="#footnote-1" style="font-size:x-small">[1]</a></p>

<p>This way of expressing numbers will tell the “<code class="language-plaintext highlighter-rouge">printf</code>” command where to put the decimal comma.</p>

<p>Let’s see how it works with the following script.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 1 <span class="c">#!/usr/bin/env bash</span>
 2 <span class="c">##Script: printf.sh</span>
 3 <span class="nb">printf</span> <span class="s2">"Number 1: %.3f</span><span class="se">\n</span><span class="s2">"</span> 12345e3
 4 <span class="nb">printf</span> <span class="s2">"Number 2: %.3f</span><span class="se">\n</span><span class="s2">"</span> 12345e-3
 5 <span class="nb">printf</span> <span class="s2">"Number 3: %.3f</span><span class="se">\n</span><span class="s2">"</span> 1234.5e3
 6 <span class="nb">printf</span> <span class="s2">"Number 4: %.3f</span><span class="se">\n</span><span class="s2">"</span> 1234.5e-3
</code></pre></div></div>

<p>When you run the previous script you will get the following output in your terminal.</p>

<pre><code class="language-txt">$ ./printf.sh
Number 1: 12345000.000
Number 2: 12.345
Number 3: 1234500.000
Number 4: 1.235
</code></pre>

<p>From this script and its output we can understand that the scientific notation is a way of representing numbers that tells how many places should the decimal comma be moved and in what direction.</p>

<p>In lines 1 and 3 of the output, the decimal comma will be moved to the right, while the lines 2 and 4 will move the decimal comma to the left.</p>

<p>Let’s summarize the basics of using this approach:</p>
<ul>
  <li>Make sure the operation you want to do is expressed using integer numbers only (otherwise Bash will fail)</li>
  <li>Decide in advance how many decimals you want to have in your result.</li>
  <li>When you use the Bash arithmetic expansion make sure you multiply the operation by “<code class="language-plaintext highlighter-rouge">10**&lt;#decimals&gt;</code>”. Like that you will calculate a number that is “#decimals” times bigger.</li>
  <li>Use scientific notation “<code class="language-plaintext highlighter-rouge">e-&lt;#decimals&gt;</code>” to be able to move the comma to the left to be able to have the number of decimals you want.</li>
</ul>

<p>We could summarize it even more with the following line.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nb">printf</span> %.&lt;precision&gt;f <span class="s2">"</span><span class="k">$((</span><span class="m">10</span><span class="o">**</span>&lt;multiplier&gt;<span class="o">*</span>&lt;operation&gt;<span class="k">))</span><span class="s2">e-&lt;multiplier&gt;”
</span></code></pre></div></div>

<p>Now let’s use the previous points in a more complex operation. We are going to create a script that will calculate the volume of a sphere.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 1 <span class="c">#!/usr/bin/env bash</span>
 2 <span class="c">#Script: sphere.sh</span>
 3 <span class="c">#!/usr/bin/env bash</span>
 4 <span class="nv">PI</span><span class="o">=</span>314
 5 <span class="nv">NUM_DECIMALS</span><span class="o">=</span>2
 6 <span class="nv">RADIUS</span><span class="o">=</span>2
 7 <span class="nb">printf</span> <span class="s2">"The volume of a sphere with radius </span><span class="nv">$RADIUS</span><span class="s2"> is %.3f</span><span class="se">\n</span><span class="s2">"</span> <span class="s2">"</span><span class="k">$((</span><span class="m">10</span><span class="o">**</span><span class="nv">$NUM_DECIMALS</span> <span class="o">*</span> <span class="nv">$PI</span> <span class="o">*</span> <span class="nv">$RADIUS</span><span class="o">**</span><span class="m">3</span> <span class="o">*</span> <span class="m">4</span> <span class="o">/</span> <span class="m">3</span><span class="k">))</span><span class="s2">e-</span><span class="k">$((</span><span class="nv">$NUM_DECIMALS</span><span class="o">*</span><span class="m">2</span><span class="k">))</span><span class="s2">"</span>
</code></pre></div></div>

<p>This script will calculate the volume of a sphere with radius of 2 units. When you run the previous script you will see this in your terminal.</p>

<pre><code class="language-txt">$ ./sphere.sh
The volume of a sphere with radius 2 is 33.493
</code></pre>

<p>Now that we know how to use the <code class="language-plaintext highlighter-rouge">printf</code> command to operate with floating-point numbers, we are going to take a look to the command <code class="language-plaintext highlighter-rouge">bc</code>.</p>

<h2 id="bc-command"><code class="language-plaintext highlighter-rouge">bc</code> command</h2>

<p>The “<code class="language-plaintext highlighter-rouge">bc</code>” command is a tool that will allow us to develop more complex calculations. It can be used in both interactive and non-interactive ways. It comes with its own language (with similarities to the C programming language) that allows you to develop scripts making mathematical calculations.</p>

<p>To have a quick introduction to the language behind the “<code class="language-plaintext highlighter-rouge">bc</code>” command, we are going to present a few tables with the basics so that we can move forward quickly.</p>

<p>The “<code class="language-plaintext highlighter-rouge">bc</code>” command has its own syntax (almost a full programming language) that allows you to define complex programs.</p>

<p>Next we will present to you a few tables that contain a summary of the basic syntax we can use with the “<code class="language-plaintext highlighter-rouge">bc</code>” command.</p>

<p>The first table contains the operands that you can use in the language of “<code class="language-plaintext highlighter-rouge">bc</code>”.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Operand</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">-expr</code></td>
      <td style="text-align: left">Negation of a expression</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">++var</code></td>
      <td style="text-align: left">Pre-incrementing the variable before using the new value</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">--var</code></td>
      <td style="text-align: left">Pre-decrementing the variable before using the new value</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">var++</code></td>
      <td style="text-align: left">Post-incrementing the variable after using the old value</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">var--</code></td>
      <td style="text-align: left">Post-decrementing the variable after using the old value</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">expr1 + expr2</code></td>
      <td style="text-align: left">Addition of the two expressions</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">expr1 - expr2</code></td>
      <td style="text-align: left">Difference of the two expressions</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">expr1 * expr2</code></td>
      <td style="text-align: left">Multiplication of the two expressions</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">expr1 / expr2</code></td>
      <td style="text-align: left">Division of the two expressions</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">expr1 % expr2</code></td>
      <td style="text-align: left">Reminder</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">expr1 ^ expr2</code></td>
      <td style="text-align: left">Exponentiation. The second expression <strong>must be an integer</strong></td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">( expr )</code></td>
      <td style="text-align: left">Force evaluation of the expression inside the parenthesis, altering the standard precedence</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">var = expr</code></td>
      <td style="text-align: left">Assigns the value of the expression to the variable</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">var &lt;op&gt;= expr</code></td>
      <td style="text-align: left">Equivalent to “<code class="language-plaintext highlighter-rouge">var = var &lt;op&gt; expr</code>”, where “<code class="language-plaintext highlighter-rouge">&lt;op&gt;</code>” is any of the previous operands (<code class="language-plaintext highlighter-rouge">+</code>, <code class="language-plaintext highlighter-rouge">-</code>, <code class="language-plaintext highlighter-rouge">*</code>, …)</td>
    </tr>
  </tbody>
</table>

<p>The next table contains relational expression that you can use with the “<code class="language-plaintext highlighter-rouge">bc</code>” command.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Relational Expression</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">expr1 &lt; expr2</code></td>
      <td style="text-align: left">Result is 1 (true) if “<code class="language-plaintext highlighter-rouge">expr1</code>” is strictly less than “<code class="language-plaintext highlighter-rouge">expr2</code>”</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">expr1 &lt;= expr2</code></td>
      <td style="text-align: left">Result is 1 (true) if “<code class="language-plaintext highlighter-rouge">expr1</code>” is strictly less than or equal to “<code class="language-plaintext highlighter-rouge">expr2</code>”</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">expr1 &gt; expr2</code></td>
      <td style="text-align: left">Result is 1 (true) if “<code class="language-plaintext highlighter-rouge">expr1</code>” is strictly greater than “<code class="language-plaintext highlighter-rouge">expr2</code>”</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">expr1 &gt;= expr2</code></td>
      <td style="text-align: left">Result is 1 (true) if “<code class="language-plaintext highlighter-rouge">expr1</code>” is strictly greater than or equal to “<code class="language-plaintext highlighter-rouge">expr2</code>”</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">expr1 == expr2</code></td>
      <td style="text-align: left">Result is 1 (true) if “<code class="language-plaintext highlighter-rouge">expr1</code>” is equal to “<code class="language-plaintext highlighter-rouge">expr2</code>”</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">expr1 != expr2</code></td>
      <td style="text-align: left">Result is 1 (true) if “<code class="language-plaintext highlighter-rouge">expr1</code>” is not equal to “<code class="language-plaintext highlighter-rouge">expr2</code>”</td>
    </tr>
  </tbody>
</table>

<p>The following table contains the boolean expressions that you can use with the “<code class="language-plaintext highlighter-rouge">bc</code>” command.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Boolean Expression</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">!expr</code></td>
      <td style="text-align: left">Result is 1 (true) if “<code class="language-plaintext highlighter-rouge">expr</code>” is 0 (zero, false).</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">expr1 &amp;&amp; expr2</code></td>
      <td style="text-align: left">Result is 1 (true) if both expressions are non-zero (true)</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">expr1 || expr2</code></td>
      <td style="text-align: left">Result is 1 (true) if either expression in non-zero (true)</td>
    </tr>
  </tbody>
</table>

<p>The “<code class="language-plaintext highlighter-rouge">bc</code>” command also contains some standard functions that are represented in the following table.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Standard Function</th>
      <th style="text-align: left">Desription</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">length(expr)</code></td>
      <td style="text-align: left">Returns the number of significant digits in the expression</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">read()</code></td>
      <td style="text-align: left">Reads a number from the standard input</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">scale(expr)</code></td>
      <td style="text-align: left">Number of digits after the decimal point in the expression</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">sqrt(expr)</code></td>
      <td style="text-align: left">Square root of the expression</td>
    </tr>
  </tbody>
</table>

<p>But the “<code class="language-plaintext highlighter-rouge">bc</code>” command also comes with internal variables that you can use in your “<em>bc scripts</em>” which are defined in the following table.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Internal Variable</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">scale</code></td>
      <td style="text-align: left">Defines the number of digits after the decimal point. The default is zero</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">ibase</code></td>
      <td style="text-align: left">Defines the conversion base for input numbers. Default is base 10</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">obase</code></td>
      <td style="text-align: left">Defines the conversion base for output numbers. Default is base 10</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">last</code></td>
      <td style="text-align: left">It contains the value of the last printed number</td>
    </tr>
  </tbody>
</table>

<p>The next table contains the statements you can use in your “<em>bc scripts</em>”.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Statement</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">“string”</code></td>
      <td style="text-align: left">The string is printed to the output</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">print list</code></td>
      <td style="text-align: left">Provides another method to print information. “<code class="language-plaintext highlighter-rouge">list</code>” is a list of expressions and strings separated by commas.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">{statement_list}</code></td>
      <td style="text-align: left">Allows multiple statements to be grouped together for execution</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">if (expression){<br />&emsp;statements1<br />}[else {<br />&emsp;statements2<br />}]</code></td>
      <td style="text-align: left">If “<code class="language-plaintext highlighter-rouge">expression</code>” is non-zero, “<code class="language-plaintext highlighter-rouge">statements1</code>” is executed.<br />If “<code class="language-plaintext highlighter-rouge">expression</code>” is zero and “<code class="language-plaintext highlighter-rouge">else</code>” is present,  “<code class="language-plaintext highlighter-rouge">statements2</code>” will be executed.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">while (expression) {<br />&emsp; statements<br />}</code></td>
      <td style="text-align: left">Will execute “<code class="language-plaintext highlighter-rouge">statements</code>” as long as “<code class="language-plaintext highlighter-rouge">expression</code>” is non-zero (true)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">for([expr1];[expr2];[expr3]){<br />&emsp;statements<br />}</code></td>
      <td style="text-align: left">“<code class="language-plaintext highlighter-rouge">expr1</code>” is evaluated once before “<code class="language-plaintext highlighter-rouge">statements</code>” are executed. <br />“<code class="language-plaintext highlighter-rouge">expr2</code>” is evaluated before each execution of “<code class="language-plaintext highlighter-rouge">statements</code>”. If it’s evaluated to non-zero, “<code class="language-plaintext highlighter-rouge">statements</code>” will be executed. If it’s evaluated to zero, the execution of the loop will be terminated.<br />“<code class="language-plaintext highlighter-rouge">expr3</code>” is evaluated after the execution of “<code class="language-plaintext highlighter-rouge">statements</code>” and before “expr2” is evaluated.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">break</code></td>
      <td style="text-align: left">Forces to exit in the most recent enclosing “<code class="language-plaintext highlighter-rouge">while</code>” or “<code class="language-plaintext highlighter-rouge">for</code>” loop statement.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">continue</code></td>
      <td style="text-align: left">Forces the execution of the next iteration in the most recent enclosing “<code class="language-plaintext highlighter-rouge">while</code>” or “<code class="language-plaintext highlighter-rouge">for</code>” loop statement.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">halt</code></td>
      <td style="text-align: left">Causes the “<code class="language-plaintext highlighter-rouge">bc</code>” processor to quit when it’s executed</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">return</code></td>
      <td style="text-align: left">Returns value zero from a function</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">return (expression)</code></td>
      <td style="text-align: left">Returns the value of “<code class="language-plaintext highlighter-rouge">expression</code>” from a function.</td>
    </tr>
  </tbody>
</table>

<p>The “<code class="language-plaintext highlighter-rouge">bc</code>” command comes as well with what are called “<em>Pseudo Statements</em>” which are the following ones:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">limits</code>: Prints the limits enforced by the version of “<code class="language-plaintext highlighter-rouge">bc</code>”</li>
  <li><code class="language-plaintext highlighter-rouge">quit</code>: Causes the “<code class="language-plaintext highlighter-rouge">bc</code>” processor to quit, regardless of where the quit statement is found.
    <ul>
      <li>“<code class="language-plaintext highlighter-rouge">if (0 == 1) quit</code>” will cause “<code class="language-plaintext highlighter-rouge">bc</code>” to terminate.</li>
      <li>“<code class="language-plaintext highlighter-rouge">if (0 == 1) halt</code>” will <strong>NOT</strong> cause “<code class="language-plaintext highlighter-rouge">bc</code>” to terminate.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">warranty</code>: Prints a warranty notice</li>
</ul>

<p>You can also define functions in a “<em>bc script</em>”. For that you need to use the following syntax.</p>

<pre><code class="language-bc">define name (params) {
    auto_list
    statement_list
}
</code></pre>

<p>Where:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">name</code> is the name of your function</li>
  <li><code class="language-plaintext highlighter-rouge">params</code> is a list of zero or more parameters separated by commas</li>
  <li><code class="language-plaintext highlighter-rouge">auto_list</code> is an optional list of variables intended to be used locally to the function. The syntax is “<code class="language-plaintext highlighter-rouge">auto variable_name,...</code>”</li>
  <li><code class="language-plaintext highlighter-rouge">statement_list</code> is a list of statements that you will use in the function</li>
</ul>

<p>The “<code class="language-plaintext highlighter-rouge">bc</code>” command comes as well with some mathematical functions that you can use when you invoke the “<code class="language-plaintext highlighter-rouge">bc</code>” command with the “<code class="language-plaintext highlighter-rouge">-l</code>” flag. The functions are as follows:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">s(x)</code>: Sine of “<code class="language-plaintext highlighter-rouge">x</code>”. “<code class="language-plaintext highlighter-rouge">x</code>” is in radians</li>
  <li><code class="language-plaintext highlighter-rouge">c(x)</code>: Cosine of “<code class="language-plaintext highlighter-rouge">x</code>”. “<code class="language-plaintext highlighter-rouge">x</code>” is in radians</li>
  <li><code class="language-plaintext highlighter-rouge">a(x)</code>: Arctangent of “<code class="language-plaintext highlighter-rouge">x</code>”. It returns radians</li>
  <li><code class="language-plaintext highlighter-rouge">l(x)</code>: Natural logarithm of “<code class="language-plaintext highlighter-rouge">x</code>”</li>
  <li><code class="language-plaintext highlighter-rouge">e(x)</code>: Exponential function. It does <code class="language-plaintext highlighter-rouge">e^{x}</code></li>
</ul>

<p>As you can see, the “<code class="language-plaintext highlighter-rouge">bc</code>” command comes with a whole language that deals with variables that are either numbers or an array of numbers. With this we are going to revisit the example of the script to calculate the volume of a sphere.</p>

<p>First of all we need to write a “<code class="language-plaintext highlighter-rouge">bc</code>” script that will do the calculation.</p>

<pre><code class="language-txt"> 1 /* Number of decimals */
 2 scale=10
 3 /* Arc whose tangent is 1 (a(1)) is 45 degrees, which is pi/4 */
 4 pi=4*a(1)
 5 /* Function that will calculate the volume of a sphere according to the radius */
 6 define volume(radius) {
 7     return((radius^3)*pi*4/3)
 8 }
 9 /* Call to calculate the volume of a sphere of radius 2 */
10 volume(2)
11 /* End of script */
12 halt
</code></pre>

<p>With this script we have to invoke the “<code class="language-plaintext highlighter-rouge">bc</code>” command with the options “<code class="language-plaintext highlighter-rouge">-l</code>” (to load the mathematical functions), “<code class="language-plaintext highlighter-rouge">-q</code>” (quiet mode) and the name of the file holding the script previously written.</p>

<p>When execute it you will get the following output in your terminal.</p>

<pre><code class="language-txt">$ bc -l -q volume_sphere_bc.txt
33.5103216341
</code></pre>

<p>The “<em>problem</em>” you could see with this script is that it’s static and calculates the volume of a sphere with radius 2. We could fix this very easily by replacing “<code class="language-plaintext highlighter-rouge">2</code>” with “<code class="language-plaintext highlighter-rouge">read()</code>”. In this case our new script would be as follows.</p>

<pre><code class="language-txt"> 1 /* Number of decimals */
 2 scale=10
 3 /* Arc whose tangent is 1 (a(1)) is 45 degrees, which is pi/4 */
 4 pi=4*a(1)
 5 /* Function that will calculate the volume of a sphere according to the radius */
 6 define volume(radius) {
 7     return((radius^3)*pi*4/3)
 8 }
 9 /* Call to calculate the volume of a sphere of radius 2 */
10 volume(read()) /* &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; */
11 /* End of script */
12 halt
</code></pre>

<p>When you execute with the new script you will notice that the “<code class="language-plaintext highlighter-rouge">bc</code>” command seems to be hanging.</p>

<pre><code class="language-txt">$ bc -l -q volume_sphere_bc_read.txt 
&lt;waiting...&gt;
</code></pre>

<p>This is because the script has stopped at “<code class="language-plaintext highlighter-rouge">read()</code>” and it’s waiting for a number to be provided via the standard input. If we introduce “<code class="language-plaintext highlighter-rouge">2</code>” and press enter we do have the following in our terminal.</p>

<pre><code class="language-txt">$ bc -l -q volume_sphere_bc_read.txt 
2
33.5103216341
</code></pre>

<p>We could make this script non-interactive by providing the number directly to the standard input when executing the “<code class="language-plaintext highlighter-rouge">bc</code>” command. We can do that by piping<a id="footnote-2-ref" href="#footnote-2" style="font-size:x-small">[2]</a> the number into the standard input, like this.</p>

<pre><code class="language-txt">$ echo 2 | bc -l -q volume_sphere_bc_read.txt 
33.5103216341
</code></pre>

<h2 id="summary">Summary</h2>

<p>In this chapter we learnt how to deal with floating-point numbers in Bash by using the command “<code class="language-plaintext highlighter-rouge">printf</code>” and the command “<code class="language-plaintext highlighter-rouge">bc</code>” which comes with a very basic programming language and allows you to create very powerful scripts.</p>

<h2 id="references">References</h2>

<ol>
  <li><a href="https://www.ibm.com/docs/zh/aix/7.2?topic=b-bc-command">https://www.ibm.com/docs/zh/aix/7.2?topic=b-bc-command</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Bc_(programming_language)">https://en.wikipedia.org/wiki/Bc_(programming_language)</a></li>
</ol>

<hr style="width:100%;text-align:center;margin-left:0;margin-bottom:10px;" />

<p id="footnote-1" style="font-size:10pt">
1. Will fix the mathematical representation at some point.<a href="#footnote-1-ref">&#8617;</a>
</p>
<p id="footnote-2" style="font-size:10pt">
2. We will learn more about pipes in a later chapter.<a href="#footnote-2-ref">&#8617;</a>
</p>


</div>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">The Engineering Corner</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">The Engineering Corner</li><li><a class="u-email" href="mailto:the.engineering.corner.314@gmail.com">the.engineering.corner.314@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>I hope you will have fun and learn new things reading this blog.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
