<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Chapter 9: Environment Variables | The Engineering Corner</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Chapter 9: Environment Variables" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Chapter 9: Environment Variables Environment Variables are a fundamental concept in operating systems and software development. They are dynamic values that provide essential information about the system environment or influence how processes behave. In Bash, environment variables are used to store configuration settings, system information, and user-defined values. These variables can be accessed by processes and programs to retrieve information or modify behavior." />
<meta property="og:description" content="Chapter 9: Environment Variables Environment Variables are a fundamental concept in operating systems and software development. They are dynamic values that provide essential information about the system environment or influence how processes behave. In Bash, environment variables are used to store configuration settings, system information, and user-defined values. These variables can be accessed by processes and programs to retrieve information or modify behavior." />
<link rel="canonical" href="http://localhost:4000/bash-in-depth/0009-Environment-Variables.html" />
<meta property="og:url" content="http://localhost:4000/bash-in-depth/0009-Environment-Variables.html" />
<meta property="og:site_name" content="The Engineering Corner" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-09-21T16:33:05+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Chapter 9: Environment Variables" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-09-21T16:33:05+02:00","datePublished":"2024-09-21T16:33:05+02:00","description":"Chapter 9: Environment Variables Environment Variables are a fundamental concept in operating systems and software development. They are dynamic values that provide essential information about the system environment or influence how processes behave. In Bash, environment variables are used to store configuration settings, system information, and user-defined values. These variables can be accessed by processes and programs to retrieve information or modify behavior.","headline":"Chapter 9: Environment Variables","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/bash-in-depth/0009-Environment-Variables.html"},"url":"http://localhost:4000/bash-in-depth/0009-Environment-Variables.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="The Engineering Corner" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">The Engineering Corner</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger">
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
            </svg>
          </span>
        </label>

        <div class="trigger">
						<a class="page-link" href="/about/">About</a>
            <a class="page-link" href="/bash-in-depth/">Bash In Depth</a>
				</div>
      </nav></div>
</header>

<!--header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" href="/">The Engineering Corner</a>
    <nav class="site-nav">
      <label for="nav-trigger">
        <svg aria-hidden="true" class="icon-menu">
          <use xlink:href="#icon-menu"></use>
        </svg>
      </label>
      <div class="trigger">
          
          <a href="/bash-in-depth/">Bash In Depth</a>
      </div>
    </nav>
  </div>
</header-->

<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="chapter-content">
  <h1 id="chapter-9-environment-variables">Chapter 9: Environment Variables</h1>
<p><strong>Environment Variables</strong> are a fundamental concept in operating systems and software development. They are dynamic values that provide essential information about the system environment or influence how processes behave. In Bash, environment variables are used to store configuration settings, system information, and user-defined values. These variables can be accessed by processes and programs to retrieve information or modify behavior.</p>

<p>In this chapter we are going to learn about the commands “<code class="language-plaintext highlighter-rouge">env</code>”, “<code class="language-plaintext highlighter-rouge">export</code>” and will revisit the “<code class="language-plaintext highlighter-rouge">declare</code>” command.</p>

<h2 id="command-env">Command “<code class="language-plaintext highlighter-rouge">env</code>”</h2>

<p>The “<code class="language-plaintext highlighter-rouge">env</code>” command in Bash is used to display a list of all environment variables. When you run “<code class="language-plaintext highlighter-rouge">env</code>” in the terminal, it will show a list of key-value pairs representing the current environment variables. For example, you might see variables like “<code class="language-plaintext highlighter-rouge">PATH</code>”, which defines where the system should look for executable files, and “<code class="language-plaintext highlighter-rouge">HOME</code>”, which points to the current user’s home directory.</p>

<p>The purpose of this command is either:</p>
<ul>
  <li>Print environment information</li>
  <li>Set/modify environment and execute a command</li>
</ul>

<p>To print the environment of your current Bash session just invoke it without any arguments.
You will see that it will produce a result similar to the following.</p>

<pre><code class="language-txt">$ env
SHELL=/bin/bash
LSCOLORS=Gxfxcxdxbxegedabagacad
SESSION_MANAGER=local/prometeus:@/tmp/.ICE-unix/3579,unix/prometeus:/tmp/.ICE-unix/3579
QT_ACCESSIBILITY=1
COLORTERM=truecolor
XDG_CONFIG_DIRS=/etc/xdg/xdg-ubuntu:/etc/xdg
LESS=-R
XDG_MENU_PREFIX=gnome-
TERM_PROGRAM_VERSION=3.4
GNOME_DESKTOP_SESSION_ID=this-is-deprecated
TMUX=/tmp/tmux-1000/default,9002,0
JAVA_HOME=/usr/lib/jvm/current
GNOME_SHELL_SESSION_MODE=ubuntu
SSH_AUTH_SOCK=/run/user/1000/keyring/ssh
MEMORY_PRESSURE_WRITE=c29tZSAyMDAwMDAgMjAwMDAwMAA=
XMODIFIERS=@im=ibus
DESKTOP_SESSION=ubuntu
GTK_MODULES=gail:atk-bridge
...
TERM_PROGRAM=tmux
_=/usr/bin/env
</code></pre>

<p>Which are the environment variables of your current session in Bash.</p>

<p>This command comes with some options that allows you to:</p>
<ul>
  <li>Add new environment variables temporarily</li>
  <li>Override environment variables temporarily</li>
  <li>Delete environment variables temporarily</li>
  <li>Ignore environment variables temporarily</li>
</ul>

<p>For all of these cases, if a command is provided it will be executed with the environment variables resulting from the behavior specified. Let’s take a look at examples for all the cases mentioned before.</p>

<p>But first we are going to write a script that prints a few variables (with the “<code class="language-plaintext highlighter-rouge">echo</code>” command) and to print the full list of environment variables (with the “<code class="language-plaintext highlighter-rouge">env</code>” command).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 1 <span class="c">#!/bin/bash</span>
 2 <span class="c">#Script: env_command.sh</span>
 3 <span class="nb">echo</span> <span class="s2">"User name : </span><span class="nv">$USER</span><span class="s2">"</span>
 4 <span class="nb">echo</span> <span class="s2">"Home : </span><span class="nv">$HOME</span><span class="s2">"</span>
 5 <span class="nb">echo</span> <span class="s2">"Path : </span><span class="nv">$PATH</span><span class="s2">"</span>
 6 <span class="nb">echo</span> <span class="s2">"These are the environment variables"</span>
 7 <span class="nb">echo</span> <span class="s2">"#####################"</span>
 8 <span class="nb">env
 </span>9 <span class="nb">echo</span> <span class="s2">"#####################"</span>
</code></pre></div></div>

<p>In the previous script you will see that on line 3, 4 and 5 the values of the environment variables “<code class="language-plaintext highlighter-rouge">USER</code>”, “<code class="language-plaintext highlighter-rouge">HOME</code>” and “<code class="language-plaintext highlighter-rouge">PATH</code>” are printed. Then on lines 7 to 9 the environment variables available to your script are printed.</p>

<p>We will use the previous script to play with the previous four options that we mentioned before.</p>

<p>In the next subsections we will explore everything we can do with the “<code class="language-plaintext highlighter-rouge">env</code>” command.</p>

<h3 id="adding-a-variable">Adding a variable</h3>

<p>The “<code class="language-plaintext highlighter-rouge">env</code>” command can be used to add variables to the environment of a script. For this we need to use the following syntax.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nb">env </span><span class="nv">MY_VAR</span><span class="o">=</span>”&lt;Value&gt;” ./my_script.sh
</code></pre></div></div>

<p>With the previous syntax the “<code class="language-plaintext highlighter-rouge">env</code>” command will execute the script or command provided with a new environment variable (in our case “<code class="language-plaintext highlighter-rouge">MY_VAR</code>”).</p>

<p>We are going to use the previous script “<code class="language-plaintext highlighter-rouge">env_command.sh</code>” to show you how it is done.</p>

<pre><code class="language-txt">$ env MY_VAR="Some Value" ./env_command.sh
User name : username
Home : /home/username
Path : /home/username/gems/bin:/home/username/gems/bin:/home/username/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin:/opt/WebDriver/bin:/home/username/.fzf/bin:/opt/WebDriver/bin
These are the environment variables
#####################
SHELL=/bin/bash
...
HOME=/home/username
USERNAME=username
LANG=en_US.UTF-8
MY_VAR=Some Value
...
#####################
</code></pre>

<p>As you can see from the execution of the previous example, the variable that was passed as the first argument to the “<code class="language-plaintext highlighter-rouge">env</code>” command is added to the rest of environment variables that the script “<code class="language-plaintext highlighter-rouge">env_command.sh</code>” can see.</p>

<p>In the next section we will use the “<code class="language-plaintext highlighter-rouge">env</code>” command to override the value of existing environment variables.</p>

<h3 id="overriding-a-variable">Overriding a variable</h3>

<p>With the “<code class="language-plaintext highlighter-rouge">env</code>” command you can as well override the value of an existing variable. You can use the same syntax as in the previous section but you only need to make sure that you are using the name of a variable that already exists.</p>

<p>Let’s take a look at the following example where we are going to override the value of the environment variable “<code class="language-plaintext highlighter-rouge">USER</code>” that exists already.</p>

<pre><code class="language-txt">User name : Overwritten_User
Home : /home/username
Path : /home/username/gems/bin:/home/username/gems/bin:/home/username/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin:/opt/WebDriver/bin:/home/username/.fzf/bin:/opt/WebDriver/bin
These are the environment variables
#####################
SHELL=/bin/bash
...
USER=Overwritten_User
TMUX_PANE=%8
GNOME_TERMINAL_SERVICE=:1.116
SDKMAN_DIR=/home/username/.sdkman
DISPLAY=:1
...
#####################
</code></pre>

<p>As you can see from the execution of the previous example, the variable “<code class="language-plaintext highlighter-rouge">USER</code>” got its value overridden from the previous value of “<code class="language-plaintext highlighter-rouge">username</code>” to the new value of “<code class="language-plaintext highlighter-rouge">Overwritten_User</code>”.</p>

<p>In the next section we will learn how to use the “<code class="language-plaintext highlighter-rouge">env</code>” command to delete an environment variable.</p>

<h3 id="deleting-a-variable">Deleting a variable</h3>

<p>With the “<code class="language-plaintext highlighter-rouge">env</code>” command you are able to delete an environment variable so that the script that you run does not have any value for the specified variable. To be able to have this behavior you have to use the following syntax.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nb">env</span> <span class="nt">-u</span> MY_VAR ./my_script.sh
</code></pre></div></div>

<p>With the previous syntax you are removing the environment variable “MY_VAR” from the set of environment variables that the script (or command) is able to see.</p>

<pre><code class="language-txt">$ env -u USER ./env_command.sh
User name :
Home : /home/username
Path : /home/username/gems/bin:/home/username/gems/bin:/home/username/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin:/opt/WebDriver/bin:/home/username/.fzf/bin:/opt/WebDriver/bin
These are the environment variables
#####################
SHELL=/bin/bash
LSCOLORS=Gxfxcxdxbxegedabagacad
...
HOME=/home/username
USERNAME=username
LANG=en_US.UTF-8
...
GDMSESSION=ubuntu
DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1000/bus
OLDPWD=/home/username/Repositories/username.github.io.git/_bash-in-depth/chapters/0009-Environment-Variables
TERM_PROGRAM=tmux
_=/usr/bin/env
#####################
</code></pre>

<p>In the result of the execution of this option you see that the environment variable “<code class="language-plaintext highlighter-rouge">USER</code>” is no longer available to the script.</p>

<p>Last but not least we are going to learn how to temporarily ignore environment variables that the script will have access to.</p>

<h3 id="empty-environment">Empty environment</h3>
<p>The “<code class="language-plaintext highlighter-rouge">env</code>” command comes with an option called “<code class="language-plaintext highlighter-rouge">--ignore-environment</code>” (or “<code class="language-plaintext highlighter-rouge">-i</code>”) that provides an empty environment (meaning with no environment variables) where a script or a command will run.</p>

<p>Let’s see an example where we will run the script that we created with an empty environment.</p>

<pre><code class="language-txt">$ env -i ./env_command.sh
User name :
Home :
Path : /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
These are the environment variables
#####################
PWD=/home/username/current-tests
SHLVL=1
_=/usr/bin/env
#####################
</code></pre>

<p>I am pretty sure you expected an empty environment. The variables “<code class="language-plaintext highlighter-rouge">PATH</code>”, “<code class="language-plaintext highlighter-rouge">PWD</code>”, “<code class="language-plaintext highlighter-rouge">SHLVL</code>” and “<code class="language-plaintext highlighter-rouge">_</code>” have a value because they are set by the shell itself.</p>

<p>Apart from the previous 4 variables, the environment is completely empty.</p>

<p>There are several benefits of using the flag “<code class="language-plaintext highlighter-rouge">-i</code>” of the “<code class="language-plaintext highlighter-rouge">env</code>” command.</p>

<p>By running a command in a clean environment, you ensure that the command’s behavior is not affected by any environment variables that might be set. This provides a high level of <strong>predictability and isolation</strong>, making it easier to debug and reproduce issues.</p>

<p>Clearing the environment can enhance <strong>security</strong>. It prevents potentially malicious environment variables from influencing the behavior of a command. This is particularly important in scenarios where commands are executed with untrusted input.</p>

<p>When writing scripts or automation, you may want to ensure that a command or script is executed without any interference from existing environment variables.</p>

<p>Sometimes, you might want to run a command with specific environment variable values that differ from the current ones.</p>

<p>While “<code class="language-plaintext highlighter-rouge">env -i</code>” has its benefits, use it with caution, as clearing the environment can potentially disrupt the normal operation of commands that rely on specific environment variables. It’s particularly useful in controlled scenarios where you need to ensure a clean, isolated environment for a specific task.</p>

<p>Alright, till now we have seen the use of “<code class="language-plaintext highlighter-rouge">env</code>” to create an environment that is temporary. Now, what if we wanted to create a new variable that is not that temporary? The answer to this is the “<code class="language-plaintext highlighter-rouge">export</code>” command.</p>

<h2 id="command-export">Command “<code class="language-plaintext highlighter-rouge">export</code>”</h2>

<p>So, in the previous section we learnt how to create temporary variables that could be used by a script (if provided a command). The limitation of that approach was that the environment variables were bound to an execution of a script within a bash session. Once it was executed, the variable would disappear. If we wanted to continue using that variable again, we would need to do the same trick. In this section we will learn how to specify a variable <strong>once</strong> to be reused several times in the same session.</p>

<p>The “<code class="language-plaintext highlighter-rouge">export</code>” command in Bash is used to mark a variable as an environment variable, making it accessible to child processes spawned from the current shell. So, once we execute this command setting a variable, every script/program triggered within the current script (or shell) will be able to use the variable.</p>

<p>We are going to see how it works using two scripts.</p>

<p>The first script will just use the “<code class="language-plaintext highlighter-rouge">export</code>” command with a variable called “<code class="language-plaintext highlighter-rouge">MY_VAR</code>” that will have a dummy value (the actual value of the variable does not matter). Once the export is done this script will run a second script that will print the environment variables.</p>

<p>The first script is as follows.</p>


</div>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">The Engineering Corner</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">The Engineering Corner</li><li><a class="u-email" href="mailto:the.engineering.corner.314@gmail.com">the.engineering.corner.314@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>I hope you will have fun and learn new things reading this blog.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
