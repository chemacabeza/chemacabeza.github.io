<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Chapter 9: Environment Variables | The Engineering Corner</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Chapter 9: Environment Variables" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Chapter 9: Environment Variables Environment Variables are a fundamental concept in operating systems and software development. They are dynamic values that provide essential information about the system environment or influence how processes behave. In Bash, environment variables are used to store configuration settings, system information, and user-defined values. These variables can be accessed by processes and programs to retrieve information or modify behavior." />
<meta property="og:description" content="Chapter 9: Environment Variables Environment Variables are a fundamental concept in operating systems and software development. They are dynamic values that provide essential information about the system environment or influence how processes behave. In Bash, environment variables are used to store configuration settings, system information, and user-defined values. These variables can be accessed by processes and programs to retrieve information or modify behavior." />
<link rel="canonical" href="http://localhost:4000/bash-in-depth/0009-Environment-Variables.html" />
<meta property="og:url" content="http://localhost:4000/bash-in-depth/0009-Environment-Variables.html" />
<meta property="og:site_name" content="The Engineering Corner" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-09-22T15:39:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Chapter 9: Environment Variables" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-09-22T15:39:00+02:00","datePublished":"2024-09-22T15:39:00+02:00","description":"Chapter 9: Environment Variables Environment Variables are a fundamental concept in operating systems and software development. They are dynamic values that provide essential information about the system environment or influence how processes behave. In Bash, environment variables are used to store configuration settings, system information, and user-defined values. These variables can be accessed by processes and programs to retrieve information or modify behavior.","headline":"Chapter 9: Environment Variables","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/bash-in-depth/0009-Environment-Variables.html"},"url":"http://localhost:4000/bash-in-depth/0009-Environment-Variables.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="The Engineering Corner" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">The Engineering Corner</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger">
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
            </svg>
          </span>
        </label>

        <div class="trigger">
						<a class="page-link" href="/about/">About</a>
            <a class="page-link" href="/bash-in-depth/">Bash In Depth</a>
				</div>
      </nav></div>
</header>

<!--header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" href="/">The Engineering Corner</a>
    <nav class="site-nav">
      <label for="nav-trigger">
        <svg aria-hidden="true" class="icon-menu">
          <use xlink:href="#icon-menu"></use>
        </svg>
      </label>
      <div class="trigger">
          
          <a href="/bash-in-depth/">Bash In Depth</a>
      </div>
    </nav>
  </div>
</header-->

<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="chapter-content">
  <h1 id="chapter-9-environment-variables">Chapter 9: Environment Variables</h1>
<p><strong>Environment Variables</strong> are a fundamental concept in operating systems and software development. They are dynamic values that provide essential information about the system environment or influence how processes behave. In Bash, environment variables are used to store configuration settings, system information, and user-defined values. These variables can be accessed by processes and programs to retrieve information or modify behavior.</p>

<p>In this chapter we are going to learn about the commands “<code class="language-plaintext highlighter-rouge">env</code>”, “<code class="language-plaintext highlighter-rouge">export</code>” and will revisit the “<code class="language-plaintext highlighter-rouge">declare</code>” command.</p>

<h2 id="command-env">Command “<code class="language-plaintext highlighter-rouge">env</code>”</h2>

<p>The “<code class="language-plaintext highlighter-rouge">env</code>” command in Bash is used to display a list of all environment variables. When you run “<code class="language-plaintext highlighter-rouge">env</code>” in the terminal, it will show a list of key-value pairs representing the current environment variables. For example, you might see variables like “<code class="language-plaintext highlighter-rouge">PATH</code>”, which defines where the system should look for executable files, and “<code class="language-plaintext highlighter-rouge">HOME</code>”, which points to the current user’s home directory.</p>

<p>The purpose of this command is either:</p>
<ul>
  <li>Print environment information</li>
  <li>Set/modify environment and execute a command</li>
</ul>

<p>To print the environment of your current Bash session just invoke it without any arguments.
You will see that it will produce a result similar to the following.</p>

<pre><code class="language-txt">$ env
SHELL=/bin/bash
LSCOLORS=Gxfxcxdxbxegedabagacad
SESSION_MANAGER=local/prometeus:@/tmp/.ICE-unix/3579,unix/prometeus:/tmp/.ICE-unix/3579
QT_ACCESSIBILITY=1
COLORTERM=truecolor
XDG_CONFIG_DIRS=/etc/xdg/xdg-ubuntu:/etc/xdg
LESS=-R
XDG_MENU_PREFIX=gnome-
TERM_PROGRAM_VERSION=3.4
GNOME_DESKTOP_SESSION_ID=this-is-deprecated
TMUX=/tmp/tmux-1000/default,9002,0
JAVA_HOME=/usr/lib/jvm/current
GNOME_SHELL_SESSION_MODE=ubuntu
SSH_AUTH_SOCK=/run/user/1000/keyring/ssh
MEMORY_PRESSURE_WRITE=c29tZSAyMDAwMDAgMjAwMDAwMAA=
XMODIFIERS=@im=ibus
DESKTOP_SESSION=ubuntu
GTK_MODULES=gail:atk-bridge
...
TERM_PROGRAM=tmux
_=/usr/bin/env
</code></pre>

<p>Which are the environment variables of your current session in Bash.</p>

<p>This command comes with some options that allows you to:</p>
<ul>
  <li>Add new environment variables temporarily</li>
  <li>Override environment variables temporarily</li>
  <li>Delete environment variables temporarily</li>
  <li>Ignore environment variables temporarily</li>
</ul>

<p>For all of these cases, if a command is provided it will be executed with the environment variables resulting from the behavior specified. Let’s take a look at examples for all the cases mentioned before.</p>

<p>But first we are going to write a script that prints a few variables (with the “<code class="language-plaintext highlighter-rouge">echo</code>” command) and to print the full list of environment variables (with the “<code class="language-plaintext highlighter-rouge">env</code>” command).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 1 <span class="c">#!/bin/bash</span>
 2 <span class="c">#Script: env_command.sh</span>
 3 <span class="nb">echo</span> <span class="s2">"User name : </span><span class="nv">$USER</span><span class="s2">"</span>
 4 <span class="nb">echo</span> <span class="s2">"Home : </span><span class="nv">$HOME</span><span class="s2">"</span>
 5 <span class="nb">echo</span> <span class="s2">"Path : </span><span class="nv">$PATH</span><span class="s2">"</span>
 6 <span class="nb">echo</span> <span class="s2">"These are the environment variables"</span>
 7 <span class="nb">echo</span> <span class="s2">"#####################"</span>
 8 <span class="nb">env
 </span>9 <span class="nb">echo</span> <span class="s2">"#####################"</span>
</code></pre></div></div>

<p>In the previous script you will see that on line 3, 4 and 5 the values of the environment variables “<code class="language-plaintext highlighter-rouge">USER</code>”, “<code class="language-plaintext highlighter-rouge">HOME</code>” and “<code class="language-plaintext highlighter-rouge">PATH</code>” are printed. Then on lines 7 to 9 the environment variables available to your script are printed.</p>

<p>We will use the previous script to play with the previous four options that we mentioned before.</p>

<p>In the next subsections we will explore everything we can do with the “<code class="language-plaintext highlighter-rouge">env</code>” command.</p>

<h3 id="adding-a-variable">Adding a variable</h3>

<p>The “<code class="language-plaintext highlighter-rouge">env</code>” command can be used to add variables to the environment of a script. For this we need to use the following syntax.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nb">env </span><span class="nv">MY_VAR</span><span class="o">=</span>”&lt;Value&gt;” ./my_script.sh
</code></pre></div></div>

<p>With the previous syntax the “<code class="language-plaintext highlighter-rouge">env</code>” command will execute the script or command provided with a new environment variable (in our case “<code class="language-plaintext highlighter-rouge">MY_VAR</code>”).</p>

<p>We are going to use the previous script “<code class="language-plaintext highlighter-rouge">env_command.sh</code>” to show you how it is done.</p>

<pre><code class="language-txt">$ env MY_VAR="Some Value" ./env_command.sh
User name : username
Home : /home/username
Path : /home/username/gems/bin:/home/username/gems/bin:/home/username/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin:/opt/WebDriver/bin:/home/username/.fzf/bin:/opt/WebDriver/bin
These are the environment variables
#####################
SHELL=/bin/bash
...
HOME=/home/username
USERNAME=username
LANG=en_US.UTF-8
MY_VAR=Some Value
...
#####################
</code></pre>

<p>As you can see from the execution of the previous example, the variable that was passed as the first argument to the “<code class="language-plaintext highlighter-rouge">env</code>” command is added to the rest of environment variables that the script “<code class="language-plaintext highlighter-rouge">env_command.sh</code>” can see.</p>

<p>In the next section we will use the “<code class="language-plaintext highlighter-rouge">env</code>” command to override the value of existing environment variables.</p>

<h3 id="overriding-a-variable">Overriding a variable</h3>

<p>With the “<code class="language-plaintext highlighter-rouge">env</code>” command you can as well override the value of an existing variable. You can use the same syntax as in the previous section but you only need to make sure that you are using the name of a variable that already exists.</p>

<p>Let’s take a look at the following example where we are going to override the value of the environment variable “<code class="language-plaintext highlighter-rouge">USER</code>” that exists already.</p>

<pre><code class="language-txt">User name : Overwritten_User
Home : /home/username
Path : /home/username/gems/bin:/home/username/gems/bin:/home/username/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin:/opt/WebDriver/bin:/home/username/.fzf/bin:/opt/WebDriver/bin
These are the environment variables
#####################
SHELL=/bin/bash
...
USER=Overwritten_User
TMUX_PANE=%8
GNOME_TERMINAL_SERVICE=:1.116
SDKMAN_DIR=/home/username/.sdkman
DISPLAY=:1
...
#####################
</code></pre>

<p>As you can see from the execution of the previous example, the variable “<code class="language-plaintext highlighter-rouge">USER</code>” got its value overridden from the previous value of “<code class="language-plaintext highlighter-rouge">username</code>” to the new value of “<code class="language-plaintext highlighter-rouge">Overwritten_User</code>”.</p>

<p>In the next section we will learn how to use the “<code class="language-plaintext highlighter-rouge">env</code>” command to delete an environment variable.</p>

<h3 id="deleting-a-variable">Deleting a variable</h3>

<p>With the “<code class="language-plaintext highlighter-rouge">env</code>” command you are able to delete an environment variable so that the script that you run does not have any value for the specified variable. To be able to have this behavior you have to use the following syntax.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nb">env</span> <span class="nt">-u</span> MY_VAR ./my_script.sh
</code></pre></div></div>

<p>With the previous syntax you are removing the environment variable “MY_VAR” from the set of environment variables that the script (or command) is able to see.</p>

<pre><code class="language-txt">$ env -u USER ./env_command.sh
User name :
Home : /home/username
Path : /home/username/gems/bin:/home/username/gems/bin:/home/username/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin:/opt/WebDriver/bin:/home/username/.fzf/bin:/opt/WebDriver/bin
These are the environment variables
#####################
SHELL=/bin/bash
LSCOLORS=Gxfxcxdxbxegedabagacad
...
HOME=/home/username
USERNAME=username
LANG=en_US.UTF-8
...
GDMSESSION=ubuntu
DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1000/bus
OLDPWD=/home/username/Repositories/username.github.io.git/_bash-in-depth/chapters/0009-Environment-Variables
TERM_PROGRAM=tmux
_=/usr/bin/env
#####################
</code></pre>

<p>In the result of the execution of this option you see that the environment variable “<code class="language-plaintext highlighter-rouge">USER</code>” is no longer available to the script.</p>

<p>Last but not least we are going to learn how to temporarily ignore environment variables that the script will have access to.</p>

<h3 id="empty-environment">Empty environment</h3>
<p>The “<code class="language-plaintext highlighter-rouge">env</code>” command comes with an option called “<code class="language-plaintext highlighter-rouge">--ignore-environment</code>” (or “<code class="language-plaintext highlighter-rouge">-i</code>”) that provides an empty environment (meaning with no environment variables) where a script or a command will run.</p>

<p>Let’s see an example where we will run the script that we created with an empty environment.</p>

<pre><code class="language-txt">$ env -i ./env_command.sh
User name :
Home :
Path : /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
These are the environment variables
#####################
PWD=/home/username/current-tests
SHLVL=1
_=/usr/bin/env
#####################
</code></pre>

<p>I am pretty sure you expected an empty environment. The variables “<code class="language-plaintext highlighter-rouge">PATH</code>”, “<code class="language-plaintext highlighter-rouge">PWD</code>”, “<code class="language-plaintext highlighter-rouge">SHLVL</code>” and “<code class="language-plaintext highlighter-rouge">_</code>” have a value because they are set by the shell itself.</p>

<p>Apart from the previous 4 variables, the environment is completely empty.</p>

<p>There are several benefits of using the flag “<code class="language-plaintext highlighter-rouge">-i</code>” of the “<code class="language-plaintext highlighter-rouge">env</code>” command.</p>

<p>By running a command in a clean environment, you ensure that the command’s behavior is not affected by any environment variables that might be set. This provides a high level of <strong>predictability and isolation</strong>, making it easier to debug and reproduce issues.</p>

<p>Clearing the environment can enhance <strong>security</strong>. It prevents potentially malicious environment variables from influencing the behavior of a command. This is particularly important in scenarios where commands are executed with untrusted input.</p>

<p>When writing scripts or automation, you may want to ensure that a command or script is executed without any interference from existing environment variables.</p>

<p>Sometimes, you might want to run a command with specific environment variable values that differ from the current ones.</p>

<p>While “<code class="language-plaintext highlighter-rouge">env -i</code>” has its benefits, use it with caution, as clearing the environment can potentially disrupt the normal operation of commands that rely on specific environment variables. It’s particularly useful in controlled scenarios where you need to ensure a clean, isolated environment for a specific task.</p>

<h3 id="env-in-the-shebang-">“<code class="language-plaintext highlighter-rouge">env</code>” in the Shebang (<code class="language-plaintext highlighter-rouge">#!</code>)</h3>
<p>The shebang (<code class="language-plaintext highlighter-rouge">#!</code>) at the start of a script tells the system which interpreter to use to execute the file. For Bash scripts, you commonly see:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">#!/bin/bash</code></li>
  <li><code class="language-plaintext highlighter-rouge">#!/usr/bin/env bash</code></li>
</ul>

<p>These specify different ways to invoke the Bash shell.</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">/bin/bash</code>
    <ul>
      <li>This is an absolute path to the bash binary.</li>
      <li>When you use <code class="language-plaintext highlighter-rouge">#!/bin/bash</code>, the system looks for the bash interpreter directly in the <code class="language-plaintext highlighter-rouge">/bin</code> directory.</li>
      <li><strong>Limitation</strong>: It assumes that <code class="language-plaintext highlighter-rouge">bash</code> is installed specifically in <code class="language-plaintext highlighter-rouge">/bin</code>, which might not always be the case on systems like macOS, BSD, or systems with custom Bash installations.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">/usr/bin/env bash</code>
    <ul>
      <li>The command <code class="language-plaintext highlighter-rouge">env</code> is a utility that looks for <code class="language-plaintext highlighter-rouge">bash</code> in the system’s <code class="language-plaintext highlighter-rouge">PATH</code> environment variable and executes it.</li>
      <li>When you use <code class="language-plaintext highlighter-rouge">#!/usr/bin/env bash</code>, the system first runs <code class="language-plaintext highlighter-rouge">env</code>, which searches for <code class="language-plaintext highlighter-rouge">bash</code> in all the directories listed in the <code class="language-plaintext highlighter-rouge">PATH</code> variable.</li>
      <li><strong>Advantage</strong>: It is more portable because it doesn’t rely on bash being in <code class="language-plaintext highlighter-rouge">/bin</code>. If bash is installed in a custom location or the user is using a different version of <code class="language-plaintext highlighter-rouge">bash</code>, <code class="language-plaintext highlighter-rouge">env</code> will locate it based on the system’s <code class="language-plaintext highlighter-rouge">PATH</code>.</li>
    </ul>
  </li>
</ol>

<p>Using <code class="language-plaintext highlighter-rouge">#!/usr/bin/env bash</code> is <strong>more portable</strong> because it works on systems where <code class="language-plaintext highlighter-rouge">bash</code> might not be located in <code class="language-plaintext highlighter-rouge">/bin</code>. Using <code class="language-plaintext highlighter-rouge">#!/bin/bash</code> is <strong>less flexible</strong> (less portable) and assumes <code class="language-plaintext highlighter-rouge">bash</code> is always in <code class="language-plaintext highlighter-rouge">/bin</code>, which is true for most Linux distributions but not for all operating systems.</p>

<p>On performance <code class="language-plaintext highlighter-rouge">#!/bin/bash</code> directly invokes Bash, so there’s no intermediate step. <code class="language-plaintext highlighter-rouge">#!/usr/bin/env bash</code> first invokes the <code class="language-plaintext highlighter-rouge">env</code> command to find <code class="language-plaintext highlighter-rouge">bash</code>, which can be slightly slower due to this extra step, though this difference is negligible in most cases.</p>

<p>Alright! Up until now we have seen the use of “<code class="language-plaintext highlighter-rouge">env</code>” to create an environment that is temporary. We also learnt why is more portable using it in the Shebang of the script.</p>

<p>Now, what if we wanted to create a new variable that is not that temporary? The answer to this is the “<code class="language-plaintext highlighter-rouge">export</code>” command.</p>

<h2 id="command-export">Command “<code class="language-plaintext highlighter-rouge">export</code>”</h2>

<p>So, in the previous section we learnt how to create temporary variables that could be used by a script (if provided a command). The limitation of that approach was that the environment variables were bound to an execution of a script within a bash session. Once it was executed, the variable would disappear. If we wanted to continue using that variable again, we would need to do the same trick. In this section we will learn how to specify a variable <strong>once</strong> to be reused several times in the same session.</p>

<p>The “<code class="language-plaintext highlighter-rouge">export</code>” command in Bash is used to mark a variable as an environment variable, making it accessible to child processes spawned from the current shell. So, once we execute this command setting a variable, every script/program triggered within the current script (or shell) will be able to use the variable.</p>

<p>We are going to see how it works using two scripts.</p>

<p>The first script will just use the “<code class="language-plaintext highlighter-rouge">export</code>” command with a variable called “<code class="language-plaintext highlighter-rouge">MY_VAR</code>” that will have a dummy value (the actual value of the variable does not matter). Once the export is done this script will run a second script that will print the environment variables.</p>

<p>The first script is as follows.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 1 <span class="c">#!/usr/bin/env bash</span>
 2 <span class="c">#Script: export_command.sh</span>
 3 <span class="c"># Declare new environment variable</span>
 4 <span class="nb">export </span><span class="nv">MY_VAR</span><span class="o">=</span><span class="s2">"My Value"</span>
 5 <span class="c"># Invoke secondary script</span>
 6 ./secondary.sh
</code></pre></div></div>

<p>As you can see in the previous script it just exports a variable and calls the “<code class="language-plaintext highlighter-rouge">secondary.sh</code>” script, which looks as follows.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 1 <span class="c">#!/usr/bin/env bash</span>
 2 <span class="c">#Script: secondary.sh</span>
 3
 4 <span class="nb">echo</span> <span class="s2">"##########"</span>
 5 <span class="nb">env
 </span>6 <span class="nb">echo</span> <span class="s2">"##########"</span>
</code></pre></div></div>

<p>Now, if you execute the “<code class="language-plaintext highlighter-rouge">export_command.sh</code>” script you will see something like the following.</p>

<pre><code class="language-txt">$ ./export_command.sh
##########
SHELL=/bin/bash
LSCOLORS=Gxfxcxdxbxegedabagacad
...
LOGNAME=username
XDG_SESSION_DESKTOP=ubuntu
XDG_SESSION_TYPE=x11
GPG_AGENT_INFO=/run/user/1000/gnupg/S.gpg-agent:0:1
SYSTEMD_EXEC_PID=3612
XAUTHORITY=/run/user/1000/gdm/Xauthority
WINDOWPATH=2
HOME=/home/username
USERNAME=username
...
MY_VAR=My Value
...
DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1000/bus
OLDPWD=/home/username/Repositories/username.github.io.git/_bash-in-depth/chapters/0009-Environment-Variables
TERM_PROGRAM=tmux
_=/usr/bin/env
##########
</code></pre>

<p>In the previous execution you see that the variable “<code class="language-plaintext highlighter-rouge">MY_VAR</code>” was inherited by the “<code class="language-plaintext highlighter-rouge">secondary.sh</code>” script from the “<code class="language-plaintext highlighter-rouge">export_command.sh</code>” script. You might be thinking that the “<code class="language-plaintext highlighter-rouge">MY_VAR</code>” variable was added to the current shell, but that is not the case.</p>

<p>If you run the command “<code class="language-plaintext highlighter-rouge">env</code>” in your current shell you will notice that the variable “<code class="language-plaintext highlighter-rouge">MY_VAR</code>” does not appear. The reason for this is that Bash will create a new process<a id="footnote-1-ref" href="#footnote-1" style="font-size:x-small">[1]</a> with the environment variables that already exist plus the variable “<code class="language-plaintext highlighter-rouge">MY_VAR</code>”. Once the script is done running the memory allocated for the environment variables for the “<code class="language-plaintext highlighter-rouge">command_export.sh</code>” script and “<code class="language-plaintext highlighter-rouge">secondary.sh</code>” script will be deallocated leaving the environment variables of the current shell untouched.</p>

<p>Once we are familiar with the “<code class="language-plaintext highlighter-rouge">export</code>” command we are going to revisit the “<code class="language-plaintext highlighter-rouge">declare</code>” command.</p>

<h2 id="revisiting-declare">Revisiting “<code class="language-plaintext highlighter-rouge">declare</code>”</h2>

<p>As we already mentioned, the “<code class="language-plaintext highlighter-rouge">declare</code>” builtin command is used to give the variables some specific attributes. In this section we are going to take a look at how to declare variables in the same way as the “<code class="language-plaintext highlighter-rouge">export</code>” command.</p>

<p>To be able to do this, we will use the option “<code class="language-plaintext highlighter-rouge">-x</code>” of “<code class="language-plaintext highlighter-rouge">declare</code>”. There are two ways to use the command.</p>

<p>The first way is to use it without any arguments, as follows.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nb">declare</span> <span class="nt">-x</span>
</code></pre></div></div>

<p>When invoked like that it will display all the variables that have been exported in the current Bash session.</p>

<p>The second way to use this command is by using it to actually declare and export a variable. This can be done using the following syntax.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nb">declare</span> <span class="nt">-x</span> <span class="nv">NAME</span><span class="o">=</span>VALUE
</code></pre></div></div>

<p>When invoked in this way it will have the same effect as the “<code class="language-plaintext highlighter-rouge">export</code>” command meaning that the variable will be visible by other scripts/programs that are launched in the same script or shell where the “<code class="language-plaintext highlighter-rouge">declare -x</code>” command was run.</p>

<p>Let’s see how it works with the following script as an example.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 1 <span class="c">#!/usr/bin/env bash</span>
 2 <span class="c">#Script: declare_export.sh</span>
 3 <span class="nb">declare</span> <span class="nt">-x</span> <span class="nv">MY_VAR</span><span class="o">=</span><span class="s2">"My Value"</span>
 4 ./secondary.sh
</code></pre></div></div>

<p>The previous script is similar to the “<code class="language-plaintext highlighter-rouge">export_command.sh</code>” script that we saw before. On line 3 the variable “<code class="language-plaintext highlighter-rouge">MY_VAR</code>” is declared with the command “<code class="language-plaintext highlighter-rouge">declare -x</code>” to have it exported so that the “<code class="language-plaintext highlighter-rouge">secondary.sh</code>” script is able to see it.</p>

<p>If you execute the “<code class="language-plaintext highlighter-rouge">declare_export.sh</code>” script you will see that it works exactly the same as the script “<code class="language-plaintext highlighter-rouge">export_command.sh</code>”. Just give it a try and execute it.</p>

<h2 id="summary">Summary</h2>

<p>Very well done!</p>

<p>In this chapter you learnt about how to play with environment variables and how to export them so that other programs or scripts can use them.</p>

<p>With the “<code class="language-plaintext highlighter-rouge">env</code>” command we learnt how to add, override and delete variables (temporarily). With the same command we learnt how to provide an environment that is (more or less) empty for other scripts and programs to run.</p>

<p>We also learnt why using the “<code class="language-plaintext highlighter-rouge">env</code>” in the Shebang of the script is more portable than using the absolute path to the <code class="language-plaintext highlighter-rouge">bash</code> program.</p>

<p>We learnt how to make variables available to other scripts and programs by “<em>exporting</em>” them using the new command “<code class="language-plaintext highlighter-rouge">export</code>” and the command “<code class="language-plaintext highlighter-rouge">declare</code>” that we already knew.</p>

<p>Now that you are done with this chapter, keep practicing. Remember… practice makes perfect.</p>

<h2 id="references">References</h2>

<ol>
  <li><a href="https://phoenixnap.com/kb/bash-declare">https://phoenixnap.com/kb/bash-declare</a></li>
  <li><a href="https://tldp.org/LDP/abs/html/declareref.html">https://tldp.org/LDP/abs/html/declareref.html</a></li>
  <li><a href="https://www.computerhope.com/unix/uenv.htm">https://www.computerhope.com/unix/uenv.htm</a></li>
  <li><a href="https://www.cyberciti.biz/faq/linux-unix-shell-export-command/">https://www.cyberciti.biz/faq/linux-unix-shell-export-command/</a></li>
  <li><a href="https://www.digitalocean.com/community/tutorials/export-command-linux">https://www.digitalocean.com/community/tutorials/export-command-linux</a></li>
  <li><a href="https://www.shell-tips.com/bash/environment-variables/#gsc.tab=0">https://www.shell-tips.com/bash/environment-variables/#gsc.tab=0</a></li>
</ol>

<hr style="width:100%;text-align:center;margin-left:0;margin-bottom:10px;" />

<p id="footnote-1" style="font-size:10pt">
1. More on this at a later chapter.<a href="#footnote-1-ref">&#8617;</a>
</p>


</div>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">The Engineering Corner</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">The Engineering Corner</li><li><a class="u-email" href="mailto:the.engineering.corner.314@gmail.com">the.engineering.corner.314@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>I hope you will have fun and learn new things reading this blog.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
